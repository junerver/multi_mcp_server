# æ¨¡æ¿ MCP æœåŠ¡å™¨

è¿™æ˜¯ä¸€ä¸ªåŸºäº MCP (Model Context Protocol) çš„æ¨¡æ¿æœåŠ¡å™¨ï¼Œç”¨äºç®¡ç†å’Œæä¾›ä»£ç ç”Ÿæˆæ¨¡æ¿æ–‡ä»¶ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“‹ **Prompt æ”¯æŒ**: æä¾›ç»“æ„åŒ–çš„æ¨¡æ¿ä¿¡æ¯åˆ—è¡¨
- ğŸ”§ **å·¥å…·æ”¯æŒ**: æ ¹æ®æ¨¡æ¿åç§°è·å–æ¨¡æ¿æ–‡ä»¶å†…å®¹
- ğŸ“ **åˆ†ç±»ç®¡ç†**: æŒ‰åç«¯ä»£ç ã€å‰ç«¯ä»£ç ã€æ•°æ®åº“è„šæœ¬åˆ†ç±»
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

## æ”¯æŒçš„æ¨¡æ¿

### åç«¯ä»£ç æ¨¡æ¿
- **domain**: Domainå®ä½“ç±»æ¨¡æ¿ (`java/domain.java.vm`)
- **sub_domain**: å­è¡¨Domainå®ä½“ç±»æ¨¡æ¿ (`java/sub-domain.java.vm`)
- **mapper**: Mapperæ¥å£æ¨¡æ¿ (`java/mapper.java.vm`)
- **service**: Serviceæ¥å£æ¨¡æ¿ (`java/service.java.vm`)
- **serviceImpl**: Serviceå®ç°ç±»æ¨¡æ¿ (`java/serviceImpl.java.vm`)
- **controller**: Controlleræ§åˆ¶å™¨æ¨¡æ¿ (`java/controller.java.vm`)
- **mapper_xml**: MyBatis XMLæ˜ å°„æ–‡ä»¶æ¨¡æ¿ (`xml/mapper.xml.vm`)

### å‰ç«¯ä»£ç æ¨¡æ¿
- **api**: APIæ¥å£æ–‡ä»¶æ¨¡æ¿ (`js/api.js.vm`)
- **vue_index**: Vueé¡µé¢ç»„ä»¶æ¨¡æ¿ (`vue/index.vue.vm`)
- **vue_form**: Vueè¡¨å•ç»„ä»¶æ¨¡æ¿ (`vue/v3/Form.vue.vm`)
- **vue_tree**: Vueæ ‘å½¢é¡µé¢ç»„ä»¶æ¨¡æ¿ (`vue/index-tree.vue.vm`)
- **vue_v3_index**: Vue3é¡µé¢ç»„ä»¶æ¨¡æ¿ (`vue/v3/index.vue.vm`)
- **vue_v3_tree**: Vue3æ ‘å½¢é¡µé¢ç»„ä»¶æ¨¡æ¿ (`vue/v3/index-tree.vue.vm`)

### æ•°æ®åº“è„šæœ¬æ¨¡æ¿
- **sql**: èœå•SQLè„šæœ¬æ¨¡æ¿ (`sql/sql.vm`)

## å¯ç”¨çš„ Prompts

### `list_templates`
åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ä»£ç ç”Ÿæˆæ¨¡æ¿ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- æ¨¡æ¿åç§°å’Œæè¿°
- æŒ‰ç±»åˆ«åˆ†ç»„æ˜¾ç¤º
- ä½¿ç”¨è¯´æ˜

## å¯ç”¨çš„å·¥å…·

### `get_template_content`
æ ¹æ®æ¨¡æ¿åç§°è·å–æ¨¡æ¿æ–‡ä»¶å†…å®¹ã€‚

**å‚æ•°**:
- `template_name` (string): æ¨¡æ¿æ–‡ä»¶åç§°

**è¿”å›**: åŒ…å«æ¨¡æ¿æ–‡ä»¶å†…å®¹çš„æ ¼å¼åŒ–æ–‡æœ¬ï¼ŒåŒ…æ‹¬æ¨¡æ¿ä¿¡æ¯å’Œå®Œæ•´çš„æ¨¡æ¿ä»£ç ã€‚

### `get_sample_content`
è·å–æ¨¡æ¿æ–‡ä»¶çš„ç¤ºä¾‹å†…å®¹ã€‚

**å‚æ•°**:
- `template_name` (string): æ¨¡æ¿æ–‡ä»¶åç§°

**è¿”å›**: åŒ…å«æ¨¡æ¿æ–‡ä»¶ç¤ºä¾‹å†…å®¹çš„æ ¼å¼åŒ–æ–‡æœ¬ï¼ŒåŒ…æ‹¬æ¨¡æ¿ä¿¡æ¯å’Œç¤ºä¾‹ä»£ç ã€‚


### `list_template_categories`
åˆ—å‡ºæ‰€æœ‰æ¨¡æ¿ç±»åˆ«åŠå…¶åŒ…å«çš„æ¨¡æ¿ã€‚

**è¿”å›**: æŒ‰ç±»åˆ«ç»„ç»‡çš„æ¨¡æ¿åˆ—è¡¨ã€‚

## å¯åŠ¨æœåŠ¡å™¨

### ä½¿ç”¨ stdio ä¼ è¾“ (é»˜è®¤)
```bash
uv run template_mcp
```

### ä½¿ç”¨ HTTP ä¼ è¾“
```bash
uv run template_mcp --transport streamable --port 3005
```

### ä½¿ç”¨ SSE ä¼ è¾“
```bash
uv run template_mcp --transport sse --port 3005
```

## ä½¿ç”¨ç¤ºä¾‹

### 1. è·å–æ‰€æœ‰æ¨¡æ¿åˆ—è¡¨
ä½¿ç”¨ `list_templates` prompt æ¥æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„æ¨¡æ¿ã€‚

### 2. è·å–ç‰¹å®šæ¨¡æ¿å†…å®¹
ä½¿ç”¨ `get_template_content` å·¥å…·ï¼Œä¼ å…¥æ¨¡æ¿åç§°ï¼š

```json
{
  "template_name": "domain"
}
```

è¿™å°†è¿”å› Domain å®ä½“ç±»æ¨¡æ¿çš„å®Œæ•´å†…å®¹ã€‚

### 3. æŸ¥çœ‹æ¨¡æ¿åˆ†ç±»
ä½¿ç”¨ `list_template_categories` å·¥å…·æ¥æŸ¥çœ‹æŒ‰ç±»åˆ«ç»„ç»‡çš„æ¨¡æ¿åˆ—è¡¨ã€‚

## æ¨¡æ¿æ–‡ä»¶ç»“æ„

```
template/
â”œâ”€â”€ java/
â”‚   â”œâ”€â”€ controller.java.vm
â”‚   â”œâ”€â”€ domain.java.vm
â”‚   â”œâ”€â”€ mapper.java.vm
â”‚   â”œâ”€â”€ service.java.vm
â”‚   â”œâ”€â”€ serviceImpl.java.vm
â”‚   â””â”€â”€ sub-domain.java.vm
â”œâ”€â”€ js/
â”‚   â””â”€â”€ api.js.vm
â”œâ”€â”€ sql/
â”‚   â””â”€â”€ sql.vm
â”œâ”€â”€ vue/
â”‚   â”œâ”€â”€ index-tree.vue.vm
â”‚   â”œâ”€â”€ index.vue.vm
â”‚   â””â”€â”€ v3/
â”‚       â”œâ”€â”€ Form.vue.vm
â”‚       â”œâ”€â”€ index-tree.vue.vm
â”‚       â””â”€â”€ index.vue.vm
â””â”€â”€ xml/
    â””â”€â”€ mapper.xml.vm
```

## ç¤ºä¾‹æ–‡ä»¶ç»“æ„

ç¤ºä¾‹æ–‡ä»¶å­˜å‚¨åœ¨ `src/template_mcp/sample/` ç›®å½•ä¸‹ï¼ŒæŒ‰ç…§ä»¥ä¸‹ç»“æ„ç»„ç»‡ï¼š

```
sample/
â”œâ”€â”€ java/           # Java ç¤ºä¾‹æ–‡ä»¶
â”‚   â”œâ”€â”€ controller.java
â”‚   â”œâ”€â”€ domain.java
â”‚   â”œâ”€â”€ mapper.java
â”‚   â”œâ”€â”€ service.java
â”‚   â””â”€â”€ serviceImpl.java
â”œâ”€â”€ js/             # JavaScript ç¤ºä¾‹æ–‡ä»¶
â”‚   â””â”€â”€ api.js
â”œâ”€â”€ sql/            # SQL ç¤ºä¾‹æ–‡ä»¶
â”‚   â””â”€â”€ sql
â”œâ”€â”€ vue/            # Vue ç¤ºä¾‹æ–‡ä»¶
â”‚   â””â”€â”€ v3/
â”‚       â”œâ”€â”€ Form.vue
â”‚       â””â”€â”€ index.vue
â””â”€â”€ xml/            # XML ç¤ºä¾‹æ–‡ä»¶
    â””â”€â”€ mapper.xml
```

## é”™è¯¯å¤„ç†

æœåŠ¡å™¨æä¾›å®Œå–„çš„é”™è¯¯å¤„ç†ï¼š
- æ— æ•ˆçš„æ¨¡æ¿åç§°ä¼šè¿”å›å¯ç”¨æ¨¡æ¿åˆ—è¡¨
- æ–‡ä»¶ä¸å­˜åœ¨ä¼šè¿”å›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- æ‰€æœ‰é”™è¯¯éƒ½ä¼šè®°å½•åˆ°æ—¥å¿—ä¸­

## ä¾èµ–é¡¹

- `mcp`: MCP åè®®æ”¯æŒ
- `click`: å‘½ä»¤è¡Œç•Œé¢
- `pydantic`: æ•°æ®éªŒè¯
- `starlette`: CORS ä¸­é—´ä»¶æ”¯æŒ

## æ—¥å¿—

æœåŠ¡å™¨ä½¿ç”¨æ ‡å‡†çš„ Python logging æ¨¡å—ï¼Œæ—¥å¿—çº§åˆ«ä¸º INFOï¼ŒåŒ…å«æ—¶é—´æˆ³å’Œè¯¦ç»†çš„æ“ä½œä¿¡æ¯ã€‚